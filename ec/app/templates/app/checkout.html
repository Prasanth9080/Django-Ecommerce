{% extends 'app/base.html' %}
{% load static %}
{% block title %}Checkout{% endblock title %}

{% block main_content %}
<div class="container">
    {% if messages %}
    {% for msg in messages %}
    <div class="alert alert-success" role="alert">
        {{ msg }}
    </div>
    {% endfor %}
    {% endif %}
    <div class="row mt-5">
        <div class="col-sm-12 col-lg-6 col-md-6">
            <div class="left-checkout">
            <h4 class="text-center">Order Summary</h4>
            <hr>
            {% for item in cart_items %}
            <div class="card mb-2">
                <div class="card-body">
                    <h5>Product: {{ item.product.title }}</h5>
                    <p>Quantity: {{ item.quantity }}</p>
                    <p class="fw-bold">Price: {{ item.product.discount_price }}</p>
                </div>
            </div>
            {% endfor %}
            <p class="fw-bold">Shipping Cost: Rs. {{ shipping_price }}</p>
            <p class="fw-bold">Total Amount = {{ totalamount }}</p>
            <small>Term and Condition: Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia, ullam saepe! Iure optio repellat dolor velit,</small>
        </div>
        </div>
        <div class="col-sm-12 col-lg-6 col-md-6">
            <div class="right-checkout">
                <h4 class="text-center">Basic details</h4>
            <hr>
            <div class="form-check mb-3">
              <label for="totamount" class="form-label">Total Amount</label>
              <input type="number" class="form-control" name="payment_mode" value="{{ totalamount }}" readonly>
          </div>
            <form method="POST" id="payment-form" action="{% url 'checkout' %}">
                {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputFname4">First name</label>
                            <input type="text" required class="form-control" name="fname" id="inputFname4" placeholder="First name">
                          </div>
                          <div class="form-group col-md-6">
                            <label for="inputLname4">Last name</label>
                            <input type="text" required class="form-control" name="lname" id="inputLname4" placeholder="Last name">
                          </div>
                      <div class="form-group col-md-6">
                        <label for="inputEmail4">Email</label>
                        <input type="email" required class="form-control" name="email" id="inputEmail4" placeholder="Email">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputPhone4">Phone</label>
                        <input type="number" required class="form-control" name="phone" id="inputPhone4" placeholder="Phone">
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="inputAddress">Address</label>
                      <input type="text" required class="form-control" name="address" id="inputAddress" placeholder="1234 Main St">
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputCity">City</label>
                        <input type="text" required class="form-control" name="city" placeholder="City" id="inputCity">
                      </div>
                      <div class="form-group col-md-4">
                        <label for="inputState">State</label>
                        <input type="text" required class="form-control" name="state" placeholder="State" id="inputState">
                      </div>
                      <div class="form-group col-md-2">
                        <label for="inputZip">Pincode</label>
                        <input type="text" required class="form-control" name="pincode" id="inputPincode">
                      </div>
                    </div>
                <div class="text-end">
                    <button type="submit" class="btn btn-primary">Place Order</button>
                </div>
                <!-- <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="{{ key }}"
                    data-description="Payment Gateway"
                    data-amount="{{ totalamount }}" 
                    data-locale="auto">
                </script> -->
            </form>
        </div>
        </div>
    </div>
</div>
{% endblock main_content %}
